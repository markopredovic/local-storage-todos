(this["webpackJsonpcustom-hook-todos"]=this["webpackJsonpcustom-hook-todos"]||[]).push([[0],{22:function(e,t,o){e.exports=o(42)},27:function(e,t,o){},28:function(e,t,o){},42:function(e,t,o){"use strict";o.r(t);var a=o(0),n=o.n(a),r=o(19),c=o.n(r),l=(o(27),o(13)),i=o(8),s=o(7),u=(o(28),function(){return n.a.createElement("nav",{className:"l-header"},n.a.createElement("ul",null,n.a.createElement("li",null,n.a.createElement(i.b,{to:"/local-storage-todos",exact:!0,activeClassName:"is-link-active"},"Todos")),n.a.createElement("li",null,n.a.createElement(i.b,{to:"/local-storage-todos/add-todo",exact:!0,activeClassName:"is-link-active"},"Add Todo")),n.a.createElement("li",null,n.a.createElement(i.b,{to:"/local-storage-todos/archive",exact:!0,activeClassName:"is-link-active"},"Archive"))))}),d=o(9),m=o(2),f=Object(a.createContext)({todos:[],addTodo:function(){},deleteTodo:function(){},getTodos:function(){}}),O=Object(s.f)((function(e){var t=Object(a.useContext)(f),o=Object(a.useRef)(""),r=function(){return 0===o.current.value.length?"Insert todo":""};return n.a.createElement("div",{className:"l-add-todo"},n.a.createElement("form",{noValidate:!0,onSubmit:function(e){e.preventDefault();var a=r();if(a.length)return m.ToastsStore.error(a);var n={};n.id=Math.round(1e3*Math.random()),n.name=o.current.value,n.isComplete=!1,t.addTodo(n),o.current.value=null,o.current.focus(),m.ToastsStore.success("Todo is added! See Todos for whole list")}},n.a.createElement("input",{type:"text",placeholder:"add new todo",ref:o}),n.a.createElement("button",{className:"m-button green",type:"submit"},n.a.createElement(d.c,null))),n.a.createElement(m.ToastsContainer,{store:m.ToastsStore}))})),v=function(e){var t=Object(a.useContext)(f);return n.a.createElement("div",{className:"m-todo"},n.a.createElement("label",null,n.a.createElement("input",{type:"checkbox",checked:e.isComplete,onChange:function(){return t.toggleTodo(e.id)}}),e.name),n.a.createElement("button",{className:"m-button red",onClick:function(){t.removeTodo(e.id),m.ToastsStore.error("Todo is deleted!")}},n.a.createElement(d.b,null)),n.a.createElement("button",{className:"m-button green",onClick:function(){t.archiveTodo(e.id),m.ToastsStore.info("Todo is archived!")}},n.a.createElement(d.a,null)),n.a.createElement(m.ToastsContainer,{store:m.ToastsStore}))},p=function(){var e=Object(a.useContext)(f).todos.map((function(e){return n.a.createElement(v,Object.assign({key:e.id},e))}));return n.a.createElement("div",{className:"l-todos"},e)},b=function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement(p,null))},h=function(e){var t=Object(a.useContext)(f);return n.a.createElement("li",null,n.a.createElement("div",{className:"l-archive-item"},n.a.createElement("span",null,e.name),n.a.createElement("button",{className:"m-button blue",onClick:function(){t.backToTodos(e.id),m.ToastsStore.warning("Todo is backed from archive!")}},n.a.createElement(d.d,null))),n.a.createElement(m.ToastsContainer,{store:m.ToastsStore}))},E=function(){var e=Object(a.useContext)(f),t="Archive is empty";return e.archive.length?t=e.archive.map((function(e){return n.a.createElement(h,Object.assign({key:e.key},e))})):m.ToastsStore.info("Archive is empty!"),n.a.createElement(n.a.Fragment,null,n.a.createElement("ul",{className:"l-archive"},t,n.a.createElement(m.ToastsContainer,{store:m.ToastsStore})))},g=function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement(E,null))},y=o(12),T=o(5);function j(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,a)}return o}function w(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?j(o,!0).forEach((function(t){Object(y.a)(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):j(o).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}var S={todos:[],archive:[]},D=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_TODO":return w({},e,{todos:[].concat(Object(T.a)(e.todos),[t.payload])});case"GET_TODOS":return w({},e,{todos:t.payload});case"TOGGLE_TODO":return C(e,t.payload);case"REMOVE_TODO":return k(e,t.payload);case"ADD_TODO_ARCHIVE":return N(e,t.payload);case"LOAD_TODOS_ARCHIVE":return w({},e,{archive:t.payload});case"BACK_TODO":return _(e,t.payload);default:return e}},C=function(e,t){var o=e.todos.map((function(e){return e.id===t?w({},e,{isComplete:!e.isComplete}):e}));return w({},e,{todos:o})},k=function(e,t){var o=e.todos.filter((function(e){return e.id===t?null:e}));return console.log("Remove todo: ",o),w({},e,{todos:o})},N=function(e,t){var o=e.todos.filter((function(e){return e.id===t}))[0];console.log("archiveTodo",o);var a=e.todos.filter((function(e){return e.id===t?null:e}));return w({},e,{todos:a,archive:[].concat(Object(T.a)(e.archive),[o])})},_=function(e,t){var o=e.archive.filter((function(e){return e.id===t}))[0],a=e.archive.filter((function(e){return e.id===t?null:e}));return w({},e,{todos:[].concat(Object(T.a)(e.todos),[o]),archive:a})};function P(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,a)}return o}var A=function(e){var t=Object(a.useReducer)(D,{todos:[],archive:[]}),o=Object(l.a)(t,2),n=o[0],r=o[1];Object(a.useEffect)((function(){console.log("use effect 1");var t=JSON.parse(window.localStorage.getItem(e));t&&r({type:"GET_TODOS",payload:t})}),[]),Object(a.useEffect)((function(){console.log("use effect 2");var t=JSON.parse(window.localStorage.getItem("".concat(e,"-archive")));console.log("archive",t),t&&r({type:"LOAD_TODOS_ARCHIVE",payload:t})}),[]);return[n,function(t){var o=[].concat(Object(T.a)(n.todos),[t]);window.localStorage.setItem(e,JSON.stringify(o)),r({type:"ADD_TODO",payload:t})},function(t){var o=Object(T.a)(n.todos).filter((function(e){return e.id===t?null:e}));window.localStorage.setItem(e,JSON.stringify(o)),r({type:"REMOVE_TODO",payload:t})},function(t){var o=Object(T.a)(n.todos).map((function(e){return e.id===t?function(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?P(o,!0).forEach((function(t){Object(y.a)(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):P(o).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}({},e,{isComplete:!e.isComplete}):e}));window.localStorage.setItem(e,JSON.stringify(o)),r({type:"TOGGLE_TODO",payload:t})},function(t){var o=n.todos.filter((function(e){return e.id===t}))[0],a=[].concat(Object(T.a)(n.archive),[o]),c=Object(T.a)(n.todos).filter((function(e){return e.id!==t}));window.localStorage.setItem("".concat(e,"-archive"),JSON.stringify(a)),window.localStorage.setItem("".concat(e),JSON.stringify(c)),r({type:"ADD_TODO_ARCHIVE",payload:t})},function(t){var o=n.archive.filter((function(e){return e.id===t}))[0];o.isComplete=!1;var a=n.archive.filter((function(e){return e.id!==t})),c=[].concat(Object(T.a)(n.todos),[o]);window.localStorage.setItem("".concat(e,"-archive"),JSON.stringify(a)),window.localStorage.setItem("".concat(e),JSON.stringify(c)),r({type:"BACK_TODO",payload:t})}]};var x=function(){var e=A("custom-hook-todos"),t=Object(l.a)(e,6),o=t[0],a=t[1],r=t[2],c=t[3],d=t[4],m=t[5];return n.a.createElement(f.Provider,{value:{todos:o.todos,archive:o.archive,addTodo:a,toggleTodo:c,removeTodo:r,archiveTodo:d,backToTodos:m}},n.a.createElement(i.a,null,n.a.createElement(u,null),n.a.createElement(s.c,null,n.a.createElement(s.a,{path:"/local-storage-todos",exact:!0},n.a.createElement(b,null)),n.a.createElement(s.a,{path:"/local-storage-todos/add-todo",exact:!0},n.a.createElement(O,null)),n.a.createElement(s.a,{path:"/local-storage-todos/archive",exact:!0},n.a.createElement(g,null)))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(n.a.createElement(x,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[22,1,2]]]);
//# sourceMappingURL=main.d1553baf.chunk.js.map