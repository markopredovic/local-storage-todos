(this["webpackJsonpcustom-hook-todos"]=this["webpackJsonpcustom-hook-todos"]||[]).push([[0],{23:function(e,t,n){e.exports=n(45)},28:function(e,t,n){},29:function(e,t,n){},45:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(20),c=n.n(o),l=(n(28),n(10)),i=n(8),s=n(11),u=(n(29),n(3)),d=Object(a.createContext)({todos:[],addTodo:function(){},deleteTodo:function(){},getTodos:function(){}}),m="/quick-todos",f=function(){var e=Object(a.useContext)(d);return r.a.createElement("nav",{className:"l-header"},r.a.createElement("div",{className:"l-lang"},r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement("button",{onClick:function(){return e.setLanguage("rs")}},"Srpski")),r.a.createElement("li",null,"|"),r.a.createElement("li",null,r.a.createElement("button",{onClick:function(){return e.setLanguage("en")}},"English")))),r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(i.c,{to:m,exact:!0,activeClassName:"is-link-active"},r.a.createElement(u.b,null))),r.a.createElement("li",null,r.a.createElement(i.c,{to:"".concat(m,"/add-todo"),exact:!0,activeClassName:"is-link-active"},r.a.createElement(u.f,null))),r.a.createElement("li",null,r.a.createElement(i.c,{to:"".concat(m,"/archive"),exact:!0,activeClassName:"is-link-active"},r.a.createElement(u.c,null)))))},g=n(2),p=n(9),v=n.n(p),O=Object(s.f)((function(e){var t=new v.a({en:{addToList:"Added to the list!",inputPlaceholderAdd:"enter task",emptyField:"empty field!"},sr:{addToList:"Dodato u listu!",inputPlaceholderAdd:"unesi stavku",emptyField:"prazno polje!"}}),n=Object(a.useContext)(d),o=Object(a.useRef)(""),c=Object(a.useState)(null),i=Object(l.a)(c,2),s=i[0],m=i[1];t.setLanguage(n.lang),Object(a.useEffect)((function(){o.current.focus()}),[]);var f=function(){return 0===o.current.value.length?t.emptyField:""};return r.a.createElement("div",{className:"l-add-todo"},r.a.createElement("form",{noValidate:!0,onSubmit:function(e){e.preventDefault(),m(null);var a=f();if(a.length)return m(a);var r={};r.id=Math.round(1e3*Math.random()),r.name=o.current.value,r.isComplete=!1,n.addTodo(r),o.current.value=null,o.current.focus(),g.ToastsStore.success(t.addToList)}},r.a.createElement("input",{type:"text",placeholder:t.inputPlaceholderAdd,ref:o,style:s&&{borderColor:"red"}}),r.a.createElement("span",{className:"m-inline-error",style:{whiteSpace:"pre-wrap"}},s),r.a.createElement("button",{className:"m-button green",type:"submit"},r.a.createElement(u.e,null))),r.a.createElement(g.ToastsContainer,{store:g.ToastsStore,position:g.ToastsContainerPosition.TOP_LEFT}))})),E=function(e){var t=new v.a({en:{itemDeleted:"Item is deleted!",itemArchived:"Item is archived!"},sr:{itemDeleted:"Stavka je obrisana!",itemArchived:"Stavka je arhivirana!"}}),n=Object(a.useContext)(d);Object(a.useEffect)((function(){t.setLanguage(n.lang)}),[n.lang]);return r.a.createElement("div",{className:"m-todo"},r.a.createElement("label",null,r.a.createElement("input",{type:"checkbox",checked:e.isComplete,onChange:function(){return n.toggleTodo(e.id)}}),r.a.createElement("span",{className:"m-unchecked m-checkbox-icon"},r.a.createElement(u.g,null)),r.a.createElement("span",{className:"m-checked m-checkbox-icon"},r.a.createElement(u.a,null)),e.name),r.a.createElement("button",{className:"m-button red",onClick:function(){n.removeTodo(e.id),g.ToastsStore.error(t.itemDeleted)}},r.a.createElement(u.d,null)),r.a.createElement("button",{className:"m-button green",onClick:function(){n.archiveTodo(e.id),g.ToastsStore.info(t.itemArchived)}},r.a.createElement(u.c,null)),r.a.createElement(g.ToastsContainer,{store:g.ToastsStore}))},h=function(){var e=Object(a.useContext)(d);console.log("[TODOS COUNT]",e.todos.length);var t=r.a.createElement("div",{className:"l-empty-list"},r.a.createElement("p",null,"List is empty. (Lista je prazna.)"),r.a.createElement(i.b,{to:"".concat(m,"/add-todo")},"Add todo (Dodaj stavku)")),n=function(e,t){var n=e*t;return[n,n+t-1]}(e.pagination.currentPage,e.pagination.itemsPerPage),o=Object(l.a)(n,2),c=o[0],s=o[1];return e.todos.length&&(t=e.todos.filter((function(e,t){return t>=c&&t<=s})).map((function(e){return r.a.createElement(E,Object.assign({key:e.id},e))}))),r.a.createElement("div",{className:"l-todos"},t)},b=function(e){var t=e.index,n=Object(a.useContext)(d),o=t===n.pagination.currentPage;return r.a.createElement("button",{className:o?"current btn-pagination":"btn-pagination",onClick:function(){return n.setCurrentPage(t)}},t+1)},y=function(){var e=Object(a.useContext)(d);console.log("[CONTEXT]",e);var t,n=(t=function(){var t=e.todos.length,n=e.pagination.itemsPerPage;return t%n!==0?Math.floor(t/n)+1:Math.floor(t/n)}(),console.log("[MAKE BUTTONS  NUM]",t),new Array(t).fill("").map((function(e,t){return r.a.createElement(b,{key:t,index:t})})));return r.a.createElement("div",{className:"l-pagination"},n)},T=function(){var e=Object(a.useContext)(d);return r.a.createElement(r.a.Fragment,null,r.a.createElement(h,null),!(e.todos.length<=e.pagination.itemsPerPage)&&r.a.createElement(y,null))},j=function(e){var t=new v.a({en:{revertedToList:"Reverted to main list!"},sr:{revertedToList:"Vraceno u listu!"}}),n=Object(a.useContext)(d);t.setLanguage(n.lang);return r.a.createElement("li",null,r.a.createElement("div",{className:"l-archive-item"},r.a.createElement("span",null,e.name),r.a.createElement("button",{className:"m-button blue",onClick:function(){n.backToTodos(e.id),g.ToastsStore.warning(t.revertedToList)}},r.a.createElement(u.h,null))),r.a.createElement(g.ToastsContainer,{store:g.ToastsStore}))},S=function(){var e=new v.a({en:{emptyArchive:"Archive is empty!"},rs:{emptyArchive:"Arhiva je prazna!"}}),t=Object(a.useContext)(d);Object(a.useEffect)((function(){e.setLanguage(t.lang),console.log("[LANG SYNC]",e.emptyArchive)}),[t.lang]);return r.a.createElement(r.a.Fragment,null,r.a.createElement("ul",{className:"l-archive"},t.archive.length?t.archive.map((function(e,t){return r.a.createElement(j,Object.assign({key:t},e))})):r.a.createElement("div",null,(e.setLanguage(t.lang),e.emptyArchive)),r.a.createElement(g.ToastsContainer,{store:g.ToastsStore})))},w=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(S,null))},P=n(14),C=n(6);function D(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function N(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?D(n,!0).forEach((function(t){Object(P.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var k={todos:[],archive:[],pagination:{itemsPerPage:5,currentPage:0},lang:"sr"},A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_TODO":return N({},e,{todos:[].concat(Object(C.a)(e.todos),[t.payload])});case"GET_TODOS":return N({},e,{todos:t.payload});case"TOGGLE_TODO":return L(e,t.payload);case"REMOVE_TODO":return _(e,t.payload);case"ADD_TODO_ARCHIVE":return x(e,t.payload);case"LOAD_TODOS_ARCHIVE":return N({},e,{archive:t.payload});case"BACK_TODO":return I(e,t.payload);case"SET_CURRENT_PAGE":return N({},e,{pagination:N({},e.pagination,{currentPage:t.payload})});case"SET_LANG":return N({},e,{lang:t.payload});default:return e}},L=function(e,t){var n=e.todos.map((function(e){return e.id===t?N({},e,{isComplete:!e.isComplete}):e}));return N({},e,{todos:n})},_=function(e,t){var n=e.todos.filter((function(e){return e.id===t?null:e}));console.log("[UPDATED TODOS LENGTH]",n.length);var a=e.pagination;console.log("Remove todo: ",n);var r=n.length%a.itemsPerPage===0?a.currentPage-1:a.currentPage;return N({},e,{todos:n,pagination:N({},e.pagination,{currentPage:r})})},x=function(e,t){var n=e.todos.filter((function(e){return e.id===t}))[0];console.log("archiveTodo",n);var a=e.todos.filter((function(e){return e.id===t?null:e}));return N({},e,{todos:a,archive:[].concat(Object(C.a)(e.archive),[n])})},I=function(e,t){var n=e.archive.filter((function(e){return e.id===t}))[0],a=e.archive.filter((function(e){return e.id===t?null:e}));return N({},e,{todos:[].concat(Object(C.a)(e.todos),[n]),archive:a})};function R(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}var G=function(e){var t=Object(a.useReducer)(A,{todos:[],archive:[],pagination:{itemsPerPage:10,currentPage:0},lang:"sr"}),n=Object(l.a)(t,2),r=n[0],o=n[1];Object(a.useEffect)((function(){console.log("use effect 1");var t=JSON.parse(window.localStorage.getItem(e));t&&o({type:"GET_TODOS",payload:t})}),[]),Object(a.useEffect)((function(){console.log("use effect 2");var t=JSON.parse(window.localStorage.getItem("".concat(e,"-archive")));console.log("archive",t),t&&o({type:"LOAD_TODOS_ARCHIVE",payload:t})}),[]);return[r,function(t){var n=[].concat(Object(C.a)(r.todos),[t]);window.localStorage.setItem(e,JSON.stringify(n)),o({type:"ADD_TODO",payload:t})},function(t){var n=Object(C.a)(r.todos).filter((function(e){return e.id===t?null:e}));window.localStorage.setItem(e,JSON.stringify(n)),o({type:"REMOVE_TODO",payload:t})},function(t){var n=Object(C.a)(r.todos).map((function(e){return e.id===t?function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?R(n,!0).forEach((function(t){Object(P.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{isComplete:!e.isComplete}):e}));window.localStorage.setItem(e,JSON.stringify(n)),o({type:"TOGGLE_TODO",payload:t})},function(t){var n=r.todos.filter((function(e){return e.id===t}))[0],a=[].concat(Object(C.a)(r.archive),[n]),c=Object(C.a)(r.todos).filter((function(e){return e.id!==t}));window.localStorage.setItem("".concat(e,"-archive"),JSON.stringify(a)),window.localStorage.setItem("".concat(e),JSON.stringify(c)),o({type:"ADD_TODO_ARCHIVE",payload:t})},function(t){var n=r.archive.filter((function(e){return e.id===t}))[0];n.isComplete=!1;var a=r.archive.filter((function(e){return e.id!==t})),c=[].concat(Object(C.a)(r.todos),[n]);window.localStorage.setItem("".concat(e,"-archive"),JSON.stringify(a)),window.localStorage.setItem("".concat(e),JSON.stringify(c)),o({type:"BACK_TODO",payload:t})},function(e){o({type:"SET_CURRENT_PAGE",payload:e})},function(e){return o({type:"SET_LANG",payload:e})}]};var J=function(){var e=G("custom-hook-todos"),t=Object(l.a)(e,8),n=t[0],a=t[1],o=t[2],c=t[3],u=t[4],g=t[5],p=t[6],v=t[7];return r.a.createElement(d.Provider,{value:{todos:n.todos,archive:n.archive,pagination:n.pagination,lang:n.lang,addTodo:a,toggleTodo:c,removeTodo:o,archiveTodo:u,backToTodos:g,setCurrentPage:p,setLanguage:v}},r.a.createElement(i.a,null,r.a.createElement("div",{className:"l-container"},r.a.createElement(f,null),r.a.createElement(s.c,null,r.a.createElement(s.a,{path:m,exact:!0},r.a.createElement(T,null)),r.a.createElement(s.a,{path:"".concat(m,"/add-todo"),exact:!0},r.a.createElement(O,null)),r.a.createElement(s.a,{path:"".concat(m,"/archive"),exact:!0},r.a.createElement(w,null))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(J,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[23,1,2]]]);
//# sourceMappingURL=main.86cdccb3.chunk.js.map